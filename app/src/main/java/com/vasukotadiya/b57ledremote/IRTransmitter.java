package com.vasukotadiya.b57ledremote;

import static android.content.ContentValues.TAG;

import android.app.Application;
import android.content.Context;
import android.hardware.ConsumerIrManager;
import android.os.Build;
import android.util.Log;
import android.widget.Toast;

import java.util.Arrays;
import java.util.HashMap;

public class IRTransmitter {

    public ConsumerIrManager irManager;
    public String[] remoteData={
            "0000 006d 0000 0022 015a 00ad 0014 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0040 0015 0041 0015 0041 0015 0041 0015 0016 0015 0040 0015 0041 0015 0041 0015 0016 0015 0016 0015 0016 0014 0017 0014 0016 0015 0016 0015 0016 0015 0016 0015 0041 0015 0041 0014 0041 0015 0041 0015 0041 0015 0041 0015 0041 0014 0041 0015 3d93",
            "0000 006d 0000 0022 015a 00ad 0015 0016 0015 0016 0014 0016 0015 0016 0016 0015 0015 0016 0015 0016 0015 0016 0015 0041 0015 0040 0015 0041 0015 0041 0015 0016 0015 0041 0014 0041 0015 0041 0015 0041 0015 0016 0015 0016 0015 0016 0015 0016 0014 0016 0015 0016 0015 0016 0015 0016 0015 0041 0015 0041 0014 0041 0015 0041 0015 0041 0015 0041 0015 0040 0015 28e5",
            "0000 006d 0000 0022 015a 00ad 0014 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0040 0015 0041 0015 0041 0015 0041 0015 0016 0015 0040 0015 0041 0015 0041 0015 0016 0015 0041 0014 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0041 0015 0016 0014 0041 0015 0041 0016 0040 0015 0041 0015 0040 0015 0041 0016 3943",
            "0000 006d 0000 0022 015a 00ad 0013 0017 0014 0017 0015 0016 0014 0017 0015 0016 0014 0017 0014 0017 0015 0016 0014 0041 0015 0041 0015 0041 0015 0041 0014 0017 0014 0041 0015 0041 0015 0041 0015 0041 0015 0040 0014 0017 0014 0017 0015 0016 0015 0016 0015 0016 0015 0016 0014 0017 0014 0017 0014 0041 0014 0042 0015 0041 0015 0041 0014 0041 0015 0041 0015 39ea",
            "0000 006d 0000 0022 0159 00ad 0014 0016 0015 0016 0014 0017 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0014 0041 0015 0041 0015 0041 0015 0041 0014 0017 0014 0041 0015 0041 0014 0042 0015 0016 0015 0016 0015 0040 0015 0016 0015 0016 0015 0016 0015 0016 0014 0017 0015 0041 0015 0040 0015 0016 0015 0041 0015 0041 0015 0041 0014 0041 0014 0042 0015 3f31",
            "0000 006d 0000 0022 0159 00ad 0015 0016 0015 0016 0014 0017 0014 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0041 0015 0040 0015 0041 0015 0041 0015 0016 0015 0041 0015 0041 0014 0041 0015 0016 0015 0041 0015 0041 0014 0017 0014 0016 0015 0016 0015 0016 0015 0016 0015 0041 0015 0016 0015 0016 0015 0040 0015 0041 0015 0041 0015 0041 0015 0041 0014 2189",
            "0000 006d 0000 0022 015a 00ad 0015 0016 0015 0016 0015 0016 0014 0016 0015 0016 0014 0017 0015 0016 0015 0016 0014 0042 0014 0042 0014 0041 0015 0041 0015 0016 0015 0041 0015 0041 0013 0042 0015 0041 0015 0016 0015 0041 0015 0016 0014 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0041 0015 0016 0015 0041 0014 0041 0015 0041 0016 0040 0015 0041 0014 355e",
            "0000 006d 0000 0022 0158 00ae 0015 0017 0013 0017 0014 0017 0014 0016 0015 0016 0015 0016 0014 0017 0015 0017 0013 0042 0015 0041 0013 0042 0015 0041 0015 0016 0014 0042 0014 0041 0015 0041 0014 0042 0015 0041 0015 0041 0013 0017 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0014 0017 0015 0016 0015 0040 0014 0042 0014 0042 0014 0042 0014 0042 0013 3152",
            "0000 006d 0000 0022 015a 00ad 0015 0016 0014 0017 0014 0016 0016 0015 0015 0016 0015 0016 0015 0016 0015 0016 0015 0040 0015 0041 0015 0041 0015 0041 0015 0016 0015 0041 0013 0042 0015 0041 0015 0016 0015 0016 0015 0016 0015 0040 0016 0015 0015 0016 0015 0016 0015 0016 0015 0041 0015 0041 0014 0041 0015 0016 0015 0041 0015 0041 0015 0041 0014 0041 0015 219a",
            "0000 006d 0000 0022 0158 00af 0013 0018 0012 0018 0013 0018 0013 0018 0013 0018 0013 0017 0014 0018 0013 0018 0013 0042 0013 0043 0013 0043 0013 0042 0014 0018 0013 0042 0013 0042 0014 0042 0014 0017 0014 0042 0014 0017 0013 0042 0014 0017 0014 0017 0014 0017 0014 0017 0014 0042 0014 0017 0014 0041 0015 0017 0014 0041 0014 0043 0013 0042 0013 0042 0015 3942",
            "0000 006d 0000 0022 015a 00ac 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0014 0016 0015 0016 0015 0016 0015 0041 0014 0042 0015 0041 0014 0041 0015 0016 0015 0041 0015 0041 0015 0040 0015 0041 0016 0015 0015 0016 0015 0041 0015 0016 0015 0016 0014 0017 0015 0015 0015 0016 0016 0040 0015 0041 0015 0016 0015 0040 0015 0041 0015 0041 0015 0041 0015 2bad",
            "0000 006d 0000 0022 0157 00b0 0014 0018 0013 0018 0013 0017 0013 0018 0013 0018 0013 0018 0013 0018 0013 0018 0014 0041 0014 0042 0013 0043 0013 0043 0013 0018 0013 0042 0014 0042 0013 0043 0013 0043 0012 0044 0013 0017 0014 0042 0013 0017 0014 0018 0013 0017 0014 0018 0013 0018 0015 0015 0013 0043 0013 0018 0014 0042 0014 0041 0015 0041 0014 0042 0013 391f",
            "0000 006d 0000 0022 0159 00ad 0015 0016 0015 0016 0014 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0041 0014 0041 0015 0041 0015 0041 0015 0016 0014 0042 0014 0041 0015 0041 0015 0016 0015 0016 0015 0041 0014 0041 0015 0016 0014 0017 0015 0016 0015 0016 0015 0041 0015 0041 0014 0017 0014 0016 0015 0041 0015 0041 0015 0041 0014 0041 0015 35b3",
            "0000 006d 0000 0022 0158 00ae 0014 0017 0014 0017 0014 0017 0013 0017 0015 0016 0014 0017 0015 0016 0014 0017 0014 0042 0014 0042 0014 0041 0015 0041 0014 0017 0015 0041 0015 0041 0013 0042 0014 0017 0015 0041 0015 0041 0015 0040 0014 0017 0015 0016 0014 0017 0015 0016 0014 0042 0015 0016 0015 0016 0014 0016 0015 0041 0014 0042 0015 0041 0015 0041 0014 2ce4",
            "0000 006d 0000 0022 015a 00ac 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0014 0016 0015 0041 0015 0041 0015 0041 0015 0041 0014 0016 0015 0041 0015 0041 0015 0041 0015 0040 0015 0016 0015 0041 0015 0041 0015 0016 0015 0016 0015 0016 0015 0016 0014 0016 0015 0041 0015 0016 0015 0016 0015 0041 0015 0040 0015 0041 0015 0041 0015 3cf3",
            "0000 006d 0000 0022 0159 00ae 0013 0018 0013 0017 0015 0016 0014 0017 0014 0017 0013 0017 0014 0017 0014 0017 0014 0042 0014 0042 0014 0042 0014 0041 0014 0017 0014 0042 0015 0041 0015 0041 0014 0041 0014 0042 0015 0041 0015 0041 0014 0016 0014 0017 0015 0016 0015 0016 0015 0016 0014 0017 0014 0017 0014 0017 0014 0041 0015 0041 0015 0041 0015 0041 0014 2fba",
            "0000 006d 0000 0022 015a 00ac 0015 0016 0015 0016 0015 0016 0015 0016 0014 0016 0015 0016 0015 0016 0015 0016 0015 0041 0015 0041 0015 0040 0015 0041 0015 0016 0015 0041 0015 0041 0015 0040 0015 0016 0015 0041 0015 0016 0015 0016 0015 0041 0015 0015 0015 0016 0015 0016 0015 0041 0015 0016 0015 0041 0015 0040 0015 0016 0015 0041 0015 0041 0015 0041 0015 2d9f",
            "0000 006d 0000 0022 015a 00ac 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0014 0016 0015 0041 0015 0041 0015 0041 0016 003f 0015 0016 0015 0041 0015 0041 0015 0041 0015 0041 0014 0016 0015 0016 0015 0016 0015 0041 0015 0016 0015 0016 0014 0017 0014 0016 0015 0041 0016 0040 0016 0040 0015 0016 0015 0040 0015 0041 0015 0041 0015 32a8",
            "0000 006d 0000 0022 015a 00ac 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0014 0017 0014 0041 0015 0041 0015 0041 0015 0041 0014 0016 0015 0041 0015 0041 0015 0041 0015 0016 0015 0016 0014 0016 0015 0016 0015 0041 0015 0016 0015 0016 0015 0016 0015 0040 0015 0041 0016 0040 0015 0041 0016 0015 0015 0040 0015 0041 0015 0041 0015 33a9",
            "0000 006d 0000 0022 0158 00ad 0014 0018 0013 0017 0014 0017 0014 0017 0014 0017 0014 0018 0013 0017 0014 0017 0013 0042 0014 0043 0013 0042 0014 0041 0014 0017 0015 0041 0015 0041 0015 0041 0014 0042 0014 0041 0015 0016 0015 0016 0014 0042 0015 0016 0014 0017 0014 0016 0014 0017 0015 0016 0015 0041 0015 0041 0015 0016 0014 0041 0015 0041 0015 0041 0015 280b",
            "0000 006d 0000 0022 0159 00ad 0015 0016 0015 0016 0015 0016 0014 0017 0014 0016 0015 0016 0015 0016 0015 0016 0015 0041 0014 0042 0014 0041 0015 0041 0014 0017 0015 0041 0015 0041 0014 0041 0015 0016 0015 0041 0015 0041 0015 0016 0014 0041 0015 0016 0016 0015 0015 0016 0015 0041 0015 0016 0015 0016 0014 0041 0015 0016 0015 0041 0015 0041 0015 0041 0014 3ada",
            "0000 006d 0000 0022 0159 00ae 0014 0017 0013 0017 0015 0016 0014 0017 0014 0017 0014 0017 0014 0017 0014 0017 0014 0042 0014 0041 0014 0042 0014 0042 0014 0017 0015 0040 0014 0042 0014 0042 0014 0042 0014 0017 0015 0040 0014 0017 0014 0042 0014 0017 0014 0017 0014 0017 0014 0017 0014 0042 0014 0016 0014 0043 0013 0017 0015 0041 0014 0042 0014 0041 0014 3c13",
            "0000 006d 0000 0022 015a 00ac 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0014 0016 0015 0016 0015 0041 0015 0041 0015 0041 0015 0040 0015 0016 0015 0041 0015 0041 0015 0041 0014 0016 0015 0016 0015 0016 0015 0016 0015 0041 0015 0016 0015 0016 0015 0016 0015 0040 0015 0041 0015 0041 0015 0041 0014 0016 0015 0041 0015 0041 0015 0041 0015 29a4",
            "0000 006d 0000 0022 015a 00ac 0015 0016 0014 0017 0015 0016 0015 0016 0015 0016 0015 0016 0013 0017 0015 0016 0015 0041 0015 0041 0015 0041 0014 0041 0015 0016 0015 0041 0015 0041 0015 0041 0014 0041 0015 0041 0015 0041 0015 0016 0015 0041 0014 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0016 0015 0041 0014 0017 0014 0041 0015 0041 0015 0041 0015 2971"

    };

    public static final double PRONTO_FREQ_MULTIPLIER = 0.241246;

    Context Context;
    public IRTransmitter(Context context) {
        // Initialize the IR manager
        Context=context;
        irManager = (ConsumerIrManager) context.getSystemService(Context.CONSUMER_IR_SERVICE);
    }

    public void transmitProntoHex(int index) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
            if (!irManager.hasIrEmitter()) {
                Toast.makeText(Context, "No IR Emitter found!", Toast.LENGTH_SHORT).show();
                return;
            }

            int[] pattern = prontoHexToIrPattern(remoteData[index]);

            irManager.transmit(38000, pattern);
        }
    }

    public int[] prontoHexToIrPattern(String prontoHex) {
        String[] hexArray = prontoHex.split(" ");

        int frequency = (int)(1000000 / (Integer.parseInt(hexArray[1], 16) * PRONTO_FREQ_MULTIPLIER));

        int[] pattern = new int[hexArray.length - 4];
        for (int i = 4; i < hexArray.length; i++) {
            int duration = Integer.parseInt(hexArray[i], 16);
            pattern[i - 4] = (int)(duration * (1000000.0 / frequency));
        }

        return pattern;
    }
}
